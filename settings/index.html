<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>API Key Settings</title>
    <script
      type="text/javascript"
      src="/homey.js"
      data-origin="settings"
    ></script>
    <style>
      .note {
        font-size: 0.9em;
        color: #666;
        margin-top: 20px;
        border-top: 1px solid #ccc;
        padding-top: 10px;
      }
    </style>
  </head>
  <body>
    <h1 data-i18n="settings.title">App Settings</h1>

    <div>
      <label for="api_key" data-i18n="settings.apiKey">N8N API Key:</label>
      <input type="password" id="api_key" />
      <button id="saveApiKeyButton" data-i18n="settings.saveApiKey">
        Save API Key
      </button>
    </div>

    <hr />

    <div>
      <label for="n8n_base_url" data-i18n="settings.n8nBaseUrl"
        >N8N Base URL:</label
      >
      <input
        type="text"
        id="n8n_base_url"
        data-i18n-placeholder="settings.n8nBaseUrlPlaceholder"
        placeholder="e.g., http://localhost:5678"
      />
      <button id="saveN8nBaseUrlButton" data-i18n="settings.saveBaseUrl">
        Save Base URL
      </button>
    </div>

    <hr />

    <div>
      <h2 data-i18n="settings.webhookAuth.title">
        Webhook Authentication Settings
      </h2>
      <div>
        <label for="webhook_auth_type" data-i18n="settings.webhookAuth.authType"
          >Authentication Type:</label
        >
        <select id="webhook_auth_type">
          <option value="none" selected data-i18n="settings.webhookAuth.none">
            None
          </option>
          <option value="basic" data-i18n="settings.webhookAuth.basic">
            Basic Auth
          </option>
          <option value="jwt" data-i18n="settings.webhookAuth.jwt">
            JWT Token
          </option>
          <option value="header" data-i18n="settings.webhookAuth.header">
            Custom Header
          </option>
        </select>
      </div>

      <div
        id="auth_details_basic"
        class="auth-details"
        style="display: none; margin-top: 10px"
      >
        <label
          for="webhook_auth_basic_user"
          data-i18n="settings.webhookAuth.username"
          >Username:</label
        >
        <input type="text" id="webhook_auth_basic_user" /><br />
        <label
          for="webhook_auth_basic_pass"
          data-i18n="settings.webhookAuth.password"
          >Password:</label
        >
        <input type="password" id="webhook_auth_basic_pass" />
      </div>

      <div
        id="auth_details_jwt"
        class="auth-details"
        style="display: none; margin-top: 10px"
      >
        <label
          for="webhook_auth_jwt_token"
          data-i18n="settings.webhookAuth.jwtToken"
          >JWT Token:</label
        >
        <input
          type="password"
          id="webhook_auth_jwt_token"
          style="width: 300px"
        />
      </div>

      <div
        id="auth_details_header"
        class="auth-details"
        style="display: none; margin-top: 10px"
      >
        <label
          for="webhook_auth_header_name"
          data-i18n="settings.webhookAuth.headerName"
          >Header Name:</label
        >
        <input
          type="text"
          id="webhook_auth_header_name"
          data-i18n-placeholder="settings.webhookAuth.headerNamePlaceholder"
          placeholder="e.g., X-Custom-Auth"
        /><br />
        <label
          for="webhook_auth_header_value"
          data-i18n="settings.webhookAuth.headerValue"
          >Header Value:</label
        >
        <input
          type="text"
          id="webhook_auth_header_value"
          style="width: 300px"
        />
      </div>
      <button
        id="saveWebhookAuthButton"
        style="margin-top: 10px"
        data-i18n="settings.webhookAuth.save"
      >
        Save Webhook Auth
      </button>
    </div>

    <div>
      <p class="note" data-i18n="settings.webhookNote">
        Important: Your n8n workflows need to have a webhook trigger to start
        the webhook and the workflow needs to be active.
      </p>
    </div>

    <script src="settings.js"></script>
  </body>
</html>
